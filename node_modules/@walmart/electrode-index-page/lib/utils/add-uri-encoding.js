"use strict";

const _ = require("lodash");

// Returns a copy of the given object with encodeURIComponent applied to all
// string values. Recursive.
module.exports = function addURIEncoding(obj) {
  if (!obj) {
    return obj;
  }
  return _.mapValues(obj, data => {
    if (typeof data === "string") {
      return encodeURIComponent(data);
    }
    if (_.isObject(data)) {
      return addURIEncoding(data);
    }
    return data;
  });
};
