"use strict";

const memoizeTag = Symbol.for("electrode-index-page-built-dnsPrefetch");

module.exports = context => {
  const routeOptions = context.user.routeOptions;

  if (routeOptions.hasOwnProperty(memoizeTag)) return routeOptions[memoizeTag];

  if (routeOptions.dnsPrefetch) {
    return (routeOptions[memoizeTag] = routeOptions.dnsPrefetch
      .map(url => `<link rel="dns-prefetch" href="${url}"/>`)
      .join(""));
  }

  return (routeOptions[memoizeTag] = "");
};
