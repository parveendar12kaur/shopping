"use strict";

const memoizeTag = Symbol.for("electrode-index-page-built-preconnect");

module.exports = context => {
  const routeOptions = context.user.routeOptions;

  if (routeOptions.hasOwnProperty(memoizeTag)) return routeOptions[memoizeTag];

  if (routeOptions.preconnect) {
    return (routeOptions[memoizeTag] = routeOptions.preconnect
      .map(url => `<link rel="preconnect" href="${url}"/>`)
      .join(""));
  }

  return (routeOptions[memoizeTag] = "");
};
