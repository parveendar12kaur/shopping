"use strict";

module.exports = function () {
  var Dyn = window._Dyn = function (selector) {
    try {
      this._data = JSON.parse((document.querySelector(selector) || {}).innerHTML);
    } catch (err) {
      this._data = {};
    }
  };

  Dyn.prototype.get = function (props) {
    props = props ? props.split(".") : [];
    var data = this._data;
    for (var x = 0; x < props.length; x++) {
      if (!data) return data;
      data = data[props[x]];
    }
    return data;
  };

  Dyn._cache = {};

  Dyn.create = function (elementId) {
    return Dyn._cache[elementId] = Dyn._cache[elementId] || new Dyn(elementId);
  };
};