# Electrode WML App

Manage typical dependencies for a standard WalmartLabs Electrode App.

# Usage

With this module, for a new WML Electrode app, these are the dependencies you need:

```js
  "dependencies": {
    "@walmart/electrode-wml-app": "^1.0.0",
    "electrode-archetype-react-app": "^3.0.0"
  },
  "devDependencies": {
    "electrode-archetype-react-app-dev": "^3.0.0"
  },
```

# Managed Dependencies

| Module                                   | Version   | Description                            |
| ---------------------------------------- | --------- | -------------------------------------- |
| `@walmart/electrode-application`         | `^1.0.0`  | Client Side React Application Wrapper  |
| `@walmart/electrode-ccm-client`          | `^3.0.0`  | WML CCM service SWAPI client           |
| `@walmart/electrode-config`              | `^1.0.1`  | Load confippet based app configuration |
| `@walmart/electrode-cookies`             | `^2.0.0`  | Universal cookies support for React    |
| `@walmart/electrode-csrf-jwt`            | `^3.0.1`  | CSRF protection with JWT               |
| `@walmart/electrode-fetch`               | `^6.2.0`  | wrapper for fetch with WML headers     |
| `@walmart/electrode-index-page`          | `^1.0.0`  | New index generator for React Apps     |
| `@walmart/electrode-log-consumer`        | `^3.0.0`  | Provides logger endpoint               |
| `@walmart/electrode-react-webapp2`       | `^12.0.0` | Index generator for React Apps         |
| `@walmart/electrode-redux-router-engine` | `^2.7.0`  | Server side React router with redux    |
| `@walmart/electrode-ui-config`           | `^4.0.0`  | Universal config support for React     |
| `@walmart/electrode-ui-logger`           | `^1.0.1`  | Universal logger support for React     |
| `@walmart/electrode-wml-server`          | `^4.0.0`  | Hapi server with WML support           |
| `@walmart/iam2-auth-client`              | `^3.0.0`  | WML IAM service client                 |
| `bluebird`                               | `^2.0.0`  | bluebird                               |
| `lodash`                                 | `^4.10.1` | lodash                                 |

# Using the App Server Startup API

## `startup([supportConfig], [appConfig])`

This module provides a simple startup API for your App Server.

It requires the module `electrode-archetype-react-app` installed by your app.

You can use this API if you like, but if you have your own custom need, you can start the server in your own way.

To use the API:

```js
require("@walmart/electrode-wml-app")();
```

The API will call `electrode-archetype-react-app`'s `support` API and then starts electrode-wml-server with config loaded by `@walmart/electrode-config`.

The function also takes these optional params:

- `supportConfig`
  - Allow passing config For `electrode-archetype-react-app`'s `support` API
  - and the following properties:
    - `ccmPreload` - if set to `true`, then WML app will update your app config with [ccm preload]

* `appConfig`
  - If you don't want WML app to use [@walmart/electrode-config] to load your app config from the `config` directory, then you can pass it in instead.

[ccm preload]: https://gecgithub01.walmart.com/electrode/electrode-ccm-preload
[@walmart/electrode-config]: https://gecgithub01.walmart.com/electrode/electrode-config

