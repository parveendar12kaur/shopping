# WalmartLabs SOA ESB bug patch

WalmartLabs SOA Enterprise Service Bus Proxy bug patch


WalmartLabs SOA Enterprise System Bus (ESB) Proxy 1.0 doesn't honor HTTP spec and require all `WM_*`
header field names to be upper case.

http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html

This was their response:


> I understand that as per RFC 2616, headers are case insensitive, but, SOARI 1.0 and ESB expect headers to be in upper
> case. Unfortunately, thatâ€™s the behavior limitation in SOA 1.0. As we move towards SOA 2.0, we will be rectifying this.


But NodeJS core always process HTTP headers in lower case.

So we have to monkey patch NodeJS core to _not_ change the `WM_*` headers.

## Versioning

This is intended for NodeJS 4.2.x.

At the time of writing this, NodeJS core source for 4.2.4 from here:

https://github.com/nodejs/node/blob/v4.2.4-proposal/lib/_http_outgoing.js
https://github.com/nodejs/node/blob/v4.2.4-proposal/lib/_http_incoming.js

## Installing

```
npm install @walmart/wl-soa-esb-bug-patch --save
```

## Usage

Just require the module

```js
require("@walmart/wl-soa-esb-bug-patch");
```

