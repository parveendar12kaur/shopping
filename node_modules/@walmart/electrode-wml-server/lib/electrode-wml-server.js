"use strict";

const electrodeServer = require("electrode-server");
const wmlDecor = require("./wml-decor");
const staticPathsDecor = require("electrode-static-paths");
const _ = require("lodash");

function electrodeWmlServer(appConfig, decors, callback) {
  let wmlDecors = [wmlDecor(), staticPathsDecor()];
  if (_.isFunction(decors)) {
    callback = decors;
  } else if (_.isArray(decors)) {
    wmlDecors = wmlDecors.concat(decors);
  }

  return electrodeServer(appConfig, wmlDecors, callback);
}

module.exports = electrodeWmlServer;
