# Change log

## [v2.4.1] - 2017-01-20

- Handle objects with circular references in logmon transport. [\#180]
  They will now be serialized with `"[Circular]"` placeholders instead of throwing an error.

## [v2.4.0] - 2016-10-27

- Default to file-only (no kafka) for logmon transport [\#175]

## [v2.3.0] - 2016-10-24

- Ensure NPM singleton install [\#173]

## [v2.2.0] - 2016-06-17

- Introduce new error handling mechanism for exceptions thrown within contexts. [\#169]

## [v2.1.0] - 2016-05-24

Some of these changes have been backported to 1.x.x - see links.

- Include basic context info in non-verbose mode [\#168]
- Include basic req/res info in logmon logs [\#165]
- Log unset duration as `-` instead of 0 [\#161]
- Use pm2 `NODE_APP_INSTANCE` instead of `pm_id` [\#157] \(see also [v1.6.1](#v161---2016-05-09))
- Use pm2 process id in log file names to prevent collisions in clusters [\#155] \(see also [v1.6.0](#v160---2016-05-06))

## [v2.0.1] - 2016-05-04

- Prevent duplicate logs in development log mode by ignoring repeat transport
  tags [\#153]

## [v2.0.0] - 2016-04-28

- Use forked version of logmon library: [electrode/electrode-logmon](https://gecgithub01.walmart.com/electrode/electrode-logmon) [\#152]
  - Receive all logmon errors via "error" event instead of only via write callback
  - Add `logger.close` method: closes the connection with kafka client if applicable

## [v1.6.1] - 2016-05-09

- Use pm2 `NODE_APP_INSTANCE` instead of `pm_id` [\#158]

## [v1.6.0] - 2016-05-06

- Use pm2 process id in log file names to prevent collisions in clusters [\#156]

## [v1.5.4] - 2016-04-21

- Use hapi archetype and remove obsolete node-config config [\#150]

## [v1.5.3] - 2016-04-09

- Refactor log router [\#148]

## [v1.5.2] - 2016-03-30

- Add method `setServer` to `log-router` which stores reference to server [\#147]
  - Try `server.log` if `request` is not available

## [v1.5.1] - 2016-03-30

- Include `logver` field in all logs with the version of `electrode-logging`
  module being used [\#146]

## [v1.5.0] - 2016-03-28

- Expect `context` as a property inside of the data object instead of
  fetching it. [\#144]
  - Docs - add `context` to the list of properties that should not be used in
    the data object passed to `logger.log`
  - See also [electrode-logging-plugin#20](https://gecgithub01.walmart.com/electrode/electrode-logging-plugin/pull/20)
    which updated the logging plugin accordingly.

## [v1.4.5] - 2016-03-25

- Documentation updates:
  - Information about dependencies [\#136]
  - `request.log` vs `logger.log` [\#137]
  - Logmon modes [\#131]
- Do not throw error when `request` is not available [\#143]
  - Use try/catch around `cls.getRequest`

## [v1.4.4] - 2016-03-09

- Accept logmon mode in stream config [\#129]

## [v1.4.3] - 2016-03-08

- Segfault when running node-debugger [\#126]
  - Pin to version 1.7.0 of bunyan to avoid bug

## [v1.4.2] - 2016-03-03

- Fix `LogmonStream` inheritance of `EventEmitter` by using `extends` [\#122]
- Emit error when trying to write to a close logmon transport [\#123]

## [v1.4.1] - 2016-03-01

- Documentation for `throwOnError` option [\#121]
- Bubble up error events from logmon client [\#116]
  - Mark transport "closed" if `ENOENT` error is received

## [v1.4.0] - 2016-02-26

- `throwOnError` option in `app.config.logging` to configure whether transaction
  errors should be thrown [\#118]

## [v1.3.1] - 2016-02-26

- Development mode: use stdout config if present [\#115]

## [v1.2.7] - 2016-02-25

- Logmon: fix tx.status and subtype [\#113]

## [v1.2.6] - 2016-02-25

- Docmentation for `transaction.fail` function [\#111]
- Logmon: fix `TransactionState` codes [\#110]

## [v1.2.5] - 2016-02-24

- Transactions: Add interface for flagging as failed: `transaction.fail(msg)` [\#109]

## [v1.2.4] - 2016-02-24

- Transactions: Fix context reset on `transaction.end` [\#108]

## [v1.2.3] - 2016-02-17

- Allow setting of top context from correlation headers [\#106]

## [v1.2.2] - 2016-02-17

- Get datacenter and hostname from env [\#103]

## [v1.2.1] - 2016-02-17

- Support parsing correlation headers [\#99]

## [v1.2.0] - 2016-02-17

- Omit headers from output when verbose is false [\#100]
- Request and response logging [\#98]

## [v1.1.4] - 2016-02-16

- Log tenant ID (based on `ONEOPS_ASSEMBLY` env) [\#95]

## [v1.1.3] - 2016-02-16

- Only log logger errors in dev/test envs[\#94]
- Logmon: serialize payload [\#93]

## [v1.1.2] - 2016-02-11

- Updated transaction docs and moved `getContext()` [\#91]
- Documentation for using/configuring logging in dev [\#76]

## [v1.1.1] - 2016-02-09

- Logmon: remove `messageId` default [\#75]
- Transactions: `beginTransaction` renamed to `callStart` [\#74]

## [v1.1.0] - 2016-02-09

- Fix logmon msg and level fields [\#72]
- Expand examples and add readme [\#71]
- Example update and transport fix [\#70]
- Don't log subtype for intermediate calls [\#67]
- Shorter non-verbose output [\#66]

## Earlier releases

See commit log: https://gecgithub01.walmart.com/electrode/electrode-logging/commits/v1.0.14

[v2.4.1]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v2.4.0...v2.4.1
[v2.4.0]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v2.3.0...v2.4.0
[v2.3.0]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v2.2.0...v2.3.0
[v2.2.0]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v2.1.0...v2.2.0
[v2.1.0]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v2.0.1...v2.1.0
[v2.0.1]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v2.0.0...v2.0.1
[v2.0.0]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.5.4...v2.0.0
[v1.6.1]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.6.0...v1.6.1
[v1.6.0]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.5.4...v1.6.0
[v1.5.4]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.5.3...v1.5.4
[v1.5.3]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.5.2...v1.5.3
[v1.5.2]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.5.1...v1.5.2
[v1.5.1]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.5.0...v1.5.1
[v1.5.0]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.4.5...v1.5.0
[v1.4.5]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.4.4...v1.4.5
[v1.4.4]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.4.3...v1.4.4
[v1.4.3]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.4.2...v1.4.3
[v1.4.2]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.4.1...v1.4.2
[v1.4.1]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.4.0...v1.4.1
[v1.4.0]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.3.1...v1.4.0
[v1.3.1]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.2.7...v1.3.1
[v1.2.7]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.2.6...v1.2.7
[v1.2.6]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.2.5...v1.2.6
[v1.2.5]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.2.4...v1.2.5
[v1.2.4]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.2.3...v1.2.4
[v1.2.3]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.2.2...v1.2.3
[v1.2.2]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.2.1...v1.2.2
[v1.2.1]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.2.0...v1.2.1
[v1.2.0]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.1.4...v1.2.0
[v1.1.4]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.1.3...v1.1.4
[v1.1.3]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.1.2...v1.1.3
[v1.1.2]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.1.1...v1.1.2
[v1.1.1]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.1.0...v1.1.1
[v1.1.0]: https://gecgithub01.walmart.com/electrode/electrode-logging/compare/v1.0.14...v1.1.0

[\#180]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/180
[\#175]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/175
[\#173]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/173
[\#169]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/168
[\#168]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/168
[\#165]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/165
[\#161]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/161
[\#158]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/158
[\#157]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/157
[\#156]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/156
[\#155]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/155
[\#153]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/153
[\#152]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/152
[\#150]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/150
[\#148]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/148
[\#147]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/147
[\#146]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/146
[\#144]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/144
[\#143]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/143
[\#137]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/137
[\#136]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/136
[\#131]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/131
[\#129]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/129
[\#126]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/126
[\#124]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/124
[\#123]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/123
[\#122]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/122
[\#121]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/121
[\#119]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/119
[\#118]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/118
[\#116]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/116
[\#115]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/115
[\#113]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/113
[\#111]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/111
[\#110]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/110
[\#109]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/109
[\#108]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/108
[\#106]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/106
[\#103]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/103
[\#100]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/100
[\#99]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/99
[\#98]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/98
[\#95]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/95
[\#94]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/94
[\#93]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/93
[\#91]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/91
[\#75]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/75
[\#74]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/74
[\#72]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/72
[\#71]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/71
[\#70]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/70
[\#67]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/67
[\#66]: https://gecgithub01.walmart.com/electrode/electrode-logging/pull/66
