"use strict";

const _ = require("lodash");

const addPresoData = (req, data) => {
  if (!req || !req.app || !req.log) {
    throw Error("addPresoData - missing or invalid request object");
  } else if (!data || !data.pageMetadata) {
    req.log(["warn"], "addPresoData - data has no pageMetadata field");
  } else {
    if (req.app.pageMetadata) {
      req.app.pageMetadata.addSource("preso", data.pageMetadata);
    }
    _.set(req.app, "seoTags.preso", data.pageMetadata);
  }
};

module.exports = { addPresoData };
