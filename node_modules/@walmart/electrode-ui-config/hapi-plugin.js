"use strict";

const uiConfig = require("./");
let hapiPkg;
try {
  hapiPkg = require("hapi/package");
} catch (err) {
  // ignore
}

require("@walmart/electrode-npm-singleton")(__dirname);

const hapiMajor = hapiPkg ? +hapiPkg.version.split(".")[0] : 16;

const pkg = {
  name: "ui-config",
  version: "1.0.0"
};
if (hapiMajor < 17) {
  function uiConfigRegister(server, options, next) {
    uiConfig._server = server;

    next();
  }
  uiConfigRegister.attributes = pkg;
  module.exports = uiConfigRegister;
} else {
  function uiConfigRegister(server, options) {
    uiConfig._server = server;
  }

  module.exports = Object.assign(
    {
      register: uiConfigRegister
    },
    pkg
  );
}
