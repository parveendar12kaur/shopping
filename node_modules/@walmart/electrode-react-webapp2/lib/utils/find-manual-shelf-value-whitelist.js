"use strict";

/**
 * Helper method to parse out and check the manual shelf CCM value for TTL Caching.
 * @param {array} ccmListCacheValue - Value from CCM i.e. ["shelf_id_one=1: 100000"]
 * @param {string} shelfPageUrl - shelf page URL i.e. /search/0/0/shelf_id_one=1&test...
 * @return {number} - value from ccm or 0
 */
module.exports = function findManShelfValueWhitelist(ccmListCacheValue, shelfPageUrl) {
  if (ccmListCacheValue && shelfPageUrl) {
    for (let i = 0; i < ccmListCacheValue.length; i++) {
      const value = ccmListCacheValue[i];
      if (typeof value === "string") {
        const split = value.split(":");
        if (shelfPageUrl.match(split[0].trim())) {
          return parseInt(split[1]) || 0;
        }
      }
    }
  }
  return 0;
};
