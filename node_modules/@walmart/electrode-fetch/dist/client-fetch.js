"use strict";

/* global window, self */

// the whatwg-fetch polyfill installs the fetch() function
// on the global object (window or self)
//
// Return that as the export for use in Webpack, Browserify etc.

require("whatwg-fetch");

var ElectrodeFetch = require("./electrode-fetch");

var instance = new ElectrodeFetch({
  manageJwt: true,
  keepAlive: false,
  fetch: self.fetch.bind(self),
  isClientFetch: true,
  getGlobalJWT: function getGlobalJWT() {
    return window._wml ? window._wml.jwt : null;
  }
});

module.exports = {
  instance: instance,
  fetch: instance.fetch.bind(instance),
  fetchJSON: instance.fetchJSON.bind(instance),
  setListener: instance.setListener.bind(instance),
  setFetch: instance.setFetch.bind(instance),
  setGenerateCorrelationID: instance.setGenerateCorrelationID.bind(instance),
  setGetJWT: instance.setGetJWT.bind(instance)
};
//# sourceMappingURL=client-fetch.js.map