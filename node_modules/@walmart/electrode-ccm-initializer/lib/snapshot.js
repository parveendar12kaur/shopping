"use strict";

const Path = require("path");

const prodDir = () => {
  //
  // COMMON_ELECTRODE_DIR created here
  //   https://gecgithub01.walmart.com/electrode-ops/bootstrap/blob/master/bootstrap.sh#L218
  // Exposed here
  //   https://gecgithub01.walmart.com/electrode-ops/bootstrap/blob/master/bootstrap.sh#L142
  // Loaded here
  //   https://gecgithub01.walmart.com/electrode-ops/deploy/blob/master/startup.sh#L110
  //
  if (process.env.NODE_ENV !== "development" && process.env.COMMON_ELECTRODE_DIR) {
    const appName = process.env.APP_NAME ? `_${process.env.APP_NAME}` : "";
    return Path.join(process.env.COMMON_ELECTRODE_DIR, `ccm${appName}`);
  }
  return undefined;
};

const defaultDir = () => {
  return prodDir() || Path.resolve(".ccm");
};

module.exports = {
  prodDir,
  defaultDir
};
