inherit: "job://otto_component-looper-flows"

tools:
  nodejs:
    - 8.9.4
  npm:
    - 5.6.0

triggers:
  - push:
      # ensure that npm version commit does not trigger another build
      # by ignoring message used in publish flow below
      ignoreMessage:
        - "*"
  - manual: Run default

flows:
  # default flow is run for each commit, add whatever you want to happen then
  default:
  - npm config ls -l
  - npm install

  setup:
    - shell (name install): |
        npm install
  lint:
    - shell (name lint): |
        npm run lint
  unit_test:
    - shell (name unit_test): |
        npm run test
  pr:
    - call: setup
    - call: lint
    - call: unit_test
    - call: component_test
