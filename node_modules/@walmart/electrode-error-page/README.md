# electrode-error-pages

Provide generic walmart.com error pages.

# install

```bash
npm i @walmart/electrode-error-pages
```

# API

## Pre-generated Static resources

```js
const errorPages = require("@walmart/electrode-error-pages");

const errorIndexHtml = errorPages.staticResponse(request, routeOptions, error);

// now send errorIndexHtml back to browser
```

## Dynamic Generating

These only work in development for this package, since only the static resources are published.

```js
const errorGenerate = require("./lib/error-page/generate");

const errorIndexHtml = errorGenerate.responseForError(request, routeOptions, error);

// now send errorIndexHtml back to browser
```

# development

- Note that developing this package requires [fyn] and [xclap].

  - Install these CLI tools with `npm i -g fyn xclap-cli`

  - Run `fyn` to install dependencies

  - Run `npm run prepare` to generate and compile sources.

  - Run `npm run gen-test` to generate and then run tests.

## Static HTML resources

The 404 and 500 static HTML resources are pre-generated.

- Generating requires [critical], which requires Chrome binary.

- Looper CI environment can't handle the Chrome binary.

- To avoid Looper CI problem, installing [critical] is thru an optional local wrapper package with [fyn]. It will only install [critical] if Looper CI is not detected.

- So be sure any update are re-generated by running `clap build-static` locally and then commit the new files.

[fyn]: https://www.npmjs.com/package/fyn
[xclap]: https://www.npmjs.com/package/xclap
[critical]: https://www.npmjs.com/package/critical
